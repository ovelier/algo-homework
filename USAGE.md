# 实验室安排系统 - 快速使用指南

## 项目完成情况

✅ **已完成所有核心功能**:
1. ✅ 实验室信息录入功能
2. ✅ 实验课申请录入功能  
3. ✅ 课表生成功能(基于优先级贪心算法)
4. ✅ 课表查询功能(按实验室/按班级)
5. ✅ SQLite数据库持久化
6. ✅ Qt图形界面
7. ✅ 详细的算法文档(README.md)

## 项目文件说明

### 核心代码文件
```
src/
├── database.h/cpp       - 数据库管理模块(SQLite封装)
├── scheduler.h/cpp      - 核心调度算法实现
├── widget.h/cpp         - Qt图形界面
├── main.cpp             - GUI程序入口
└── test_algorithm.cpp   - 算法测试程序(命令行,无需Qt)
```

### 配置文件
```
CMakeLists.txt           - Qt GUI版本构建配置
CMakeLists_flexible.txt  - 灵活构建配置(可选择是否编译GUI)
README.md                - 完整项目文档(重点是算法说明)
```

## 编译方式

### 方式1: 使用Qt Creator(推荐)
1. 打开Qt Creator
2. 打开项目: 文件 -> 打开文件或项目 -> 选择 `CMakeLists.txt`
3. 选择构建套件: Desktop Qt 6.9.2 MSVC2022 64bit
4. 点击构建按钮(锤子图标)
5. 运行程序(绿色三角形按钮)

### 方式2: 命令行编译(如果环境配置正确)
```bash
mkdir build
cd build
cmake ..
cmake --build .
./algo-homework.exe
```

### 方式3: 测试算法(无需Qt,纯命令行)
如果Qt环境有问题,可以只编译测试算法:

```bash
# 修改CMakeLists.txt为CMakeLists_flexible.txt
# 或手动使用以下命令:
g++ -std=c++17 -o test_algorithm \
    src/test_algorithm.cpp \
    src/database.cpp \
    src/scheduler.cpp \
    third_party/sqlite/sqlite3.c \
    -I src -I third_party/sqlite
    
./test_algorithm.exe
```

## 使用说明

### GUI版本使用流程

#### 1. 添加实验室
- 打开"实验室管理"标签页
- 输入地址: `实验楼A301`
- 设置容量: `40`
- 点击"添加实验室"
- 重复添加更多实验室

#### 2. 添加申请
- 打开"申请管理"标签页
- 填写信息:
  - 班级ID: `B210307`
  - 学生人数: `33`
  - 指导教师: `朱洁`
  - 优先级: `1` (数字越小优先级越高)
- 选择时间段:
  - **左键点击**: 设为期望时间(蓝色)
  - **右键点击**: 设为不可用时间(红色)
  - 例如: 左键点击第9周周一至周五上午
- 点击"添加申请"

#### 3. 生成课表
- 打开"课表生成"标签页
- 点击"生成课程安排"按钮
- 查看统计结果(成功率、失败列表等)

#### 4. 查询课表
- 打开"课表查询"标签页
- 按实验室查询: 选择实验室 -> 点击查询
- 按班级查询: 输入班级ID -> 点击查询

### 测试程序使用(test_algorithm.cpp)

这个程序会自动:
1. 创建测试数据库
2. 添加3个实验室
3. 添加4个申请(参考题目示例)
4. 运行调度算法
5. 显示完整的调度结果和统计信息
6. 演示按班级查询功能

直接运行即可看到算法效果,无需手动输入数据。

## 核心算法亮点(详见README.md)

### 两阶段贪心策略
1. **第一阶段**: 优先满足教师期望的时间段
2. **第二阶段**: 如期望无法满足,尝试其他可用时间

### 约束检查
- ✅ 容量约束: 确保实验室能容纳班级人数
- ✅ 时间冲突: 同一实验室同一时间不重复分配
- ✅ 排除时间: 过滤教师不可用时间
- ✅ 优先级: 先申请先满足

### 算法复杂度
- 时间复杂度: O(R × T × L)
  - R = 申请数
  - T = 时间槽数(固定20个)
  - L = 实验室数
- 空间复杂度: O(L × S)
  - S = 平均每个实验室占用的时间槽数

## 示例数据

### 实验室数据
| 地址 | 容量 |
|------|------|
| 实验楼A301 | 40 |
| 实验楼A302 | 40 |
| 实验楼B201 | 50 |

### 申请数据(来自题目)
| 班级 | 人数 | 教师 | 优先级 |
|------|------|------|--------|
| B210307 | 33 | 朱洁 | 1 |
| B210308 | 36 | 胡惠娟 | 2 |
| B210309 | 33 | 戴华 | 3 |
| B210310 | 33 | 徐鹤 | 4 |

## 查看详细文档

完整的项目说明、算法详解、数据库设计请查看 **README.md**

该文档包含:
- 📊 完整的算法伪代码
- 🔍 算法复杂度分析
- ✅ 算法正确性证明
- 📈 时间复杂度推导
- 💾 数据库表结构设计
- 🎯 模块化架构说明

## 常见问题

### Q: 如果编译失败怎么办?
A: 
1. 确保安装了Qt 6.5+和CMake 3.19+
2. 使用Qt Creator打开项目更可靠
3. 或者只编译测试程序(test_algorithm),不需要Qt

### Q: 数据保存在哪里?
A: SQLite数据库文件 `lab_schedule.db` 保存在程序运行目录

### Q: 如何清空数据?
A: 删除 `lab_schedule.db` 文件,重启程序会自动创建新数据库

### Q: 算法能保证100%成功分配吗?
A: 不能。当实验室资源不足或时间冲突严重时,部分申请可能无法满足。系统会在结果中明确显示失败的申请。

### Q: 如何调整优先级?
A: 在添加申请时设置"优先级"字段,数字越小优先级越高(1最高)

## 联系方式

如有问题,请查看README.md或源代码注释。所有核心算法都有详细的中文注释。

---
**祝使用愉快!** 🎉
